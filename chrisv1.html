<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script src="node_modules/d3/d3.js"></script>
<script src="node_modules/tone/build/Tone.js"></script>
<style>

</style>
</head>
<body>

<script>

var keys = new Tone.PolySynth(4, Tone.Sampler, {
        "son1" : "hh.mp3",
        "son2" : "hho.mp3",
        "son3" : "kick.mp3",
        "son4" : "snare.mp3",
    }, {
        "volume" : -10,
    }).toMaster();

var noteNames = ['son1', 'son2', 'son3', 'son4'];

var loop = new Tone.Sequence(function(time, col){
    var column = d3.range(4).map(function(d){ return ~~(Math.random()*Math.random()*4); });
    for (var i = 0; i < 4; i++){
        if (column[i] === 1){
            keys.triggerAttackRelease(noteNames[i], [8, 16, 32, 64][~~(Math.random()*4)] + "n", time);
        }
    }
}, d3.range(16), "16n");

Tone.Transport.start();

setTimeout(function(){ loop.start(); }, 300)

</script>
</body>
</html>
